(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{376:function(t,e,n){var r=n(377);"string"===typeof r&&(r=[[t.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(82)(r,i);r.locals&&(t.exports=r.locals)},377:function(t,e,n){(t.exports=n(81)(!1)).push([t.i,".musicList {\n  width: 1000px;\n  height: calc(100vh - 95px);\n  margin: 20px auto;\n  background: #fff9e9;\n}\n.musicList ul {\n  height: 60vh;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: space-around;\n}\n.musicList ul li {\n  position: relative;\n}\n.musicList ul li .musicBox {\n  width: 150px;\n  height: 150px;\n  margin: 10px;\n  border-radius: 100%;\n  overflow: hidden;\n  box-shadow: 0 0 3px #666666;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.musicList ul li .musicBox img {\n  width: 100%;\n}\n.musicList ul li .rotateGo {\n  animation: myfirst 10s infinite;\n  animation-timing-function: linear;\n}\n.musicList ul li .musicInfo {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.musicList ul li .musicInfo p {\n  width: 150px;\n  height: 24px;\n  line-height: 24px;\n  display: inline-block;\n  text-align: center;\n  color: #fff9e9;\n  background: rgba(84, 120, 240, 0.65);\n  border-radius: 3px;\n  padding: 2px 3px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  margin-bottom: 2px;\n  font-size: 13px;\n}\n.musicList .audiobox,\n.musicList .searchBox {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n.musicList .audiobox .hotList,\n.musicList .searchBox .hotList {\n  margin: 10px 0;\n}\n.musicList .audiobox .hotList span,\n.musicList .searchBox .hotList span {\n  display: inline-block;\n  margin: 0 5px;\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  padding: 0 5px;\n  background: #007d78;\n  border-radius: 3px;\n  color: #ffffff;\n  font-size: 12px;\n  cursor: pointer;\n}\n.musicList .audiobox .iconBtn,\n.musicList .searchBox .iconBtn {\n  position: absolute;\n  font-size: 16px;\n  transition: all 0.2s;\n}\n.musicList .audiobox .iconBtn:hover,\n.musicList .searchBox .iconBtn:hover {\n  font-size: 18px;\n  cursor: pointer;\n}\n@keyframes myfirst {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n",""])},378:function(t,e,n){var r,i,a,s,o,c,u,l,f,h,m,d=[].slice,p=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},x={}.hasOwnProperty;for(l in u=n(379),a=function(t){return t instanceof Function},s=function(t){return"string"===typeof t||!!t&&"object"===typeof t&&"[object String]"===Object.prototype.toString.call(t)},(m=e).VERSION="1.1.0",h=function(t){var e;for(t=t.replace(/\\/g,"/"),e=/\/\//;t.match(e);)t=t.replace(e,"/");return t},u)a(f=u[l])?m[l]=function(t){return function(){var e,n;return e=(e=1<=arguments.length?d.call(arguments,0):[]).map(function(t){return s(t)?h(t):t}),n=u[t].apply(u,e),s(n)?h(n):n}}(l):m[l]=f;for(c in m.sep="/",i={toUnix:h,normalizeSafe:function(t){return(t=h(t)).startsWith("./")?t.startsWith("./..")||"./"===t?m.normalize(t):"./"+m.normalize(t):m.normalize(t)},normalizeTrim:function(t){return(t=m.normalizeSafe(t)).endsWith("/")?t.slice(0,+(t.length-2)+1||9e9):t},joinSafe:function(){var t,e;return t=1<=arguments.length?d.call(arguments,0):[],e=m.join.apply(null,t),t[0].startsWith("./")&&!e.startsWith("./")&&(e="./"+e),e},addExt:function(t,e){return e?("."!==e[0]&&(e="."+e),t+(t.endsWith(e)?"":e)):t},trimExt:function(t,e,n){var r;return null==n&&(n=7),r=m.extname(t),o(r,e,n)?t.slice(0,+(t.length-r.length-1)+1||9e9):t},removeExt:function(t,e){return e?(e="."===e[0]?e:"."+e,m.extname(t)===e?m.trimExt(t):t):t},changeExt:function(t,e,n,r){return null==r&&(r=7),m.trimExt(t,n,r)+(e?"."===e[0]?e:"."+e:"")},defaultExt:function(t,e,n,r){var i;return null==r&&(r=7),i=m.extname(t),o(i,n,r)?t:m.addExt(t,e)}},o=function(t,e,n){return null==e&&(e=[]),t&&t.length<=n&&p.call(e.map(function(t){return(t&&"."!==t[0]?".":"")+t}),t)<0},i)if(x.call(i,c)){if(r=i[c],void 0!==m[c])throw new Error("path."+c+" already exists.");m[c]=r}},379:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(t){return r.exec(t).slice(1)};function a(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}e.resolve=function(){for(var e="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var s=i>=0?arguments[i]:t.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,r="/"===s.charAt(0))}return(r?"/":"")+(e=n(a(e.split("/"),function(t){return!!t}),!r).join("/"))||"."},e.normalize=function(t){var r=e.isAbsolute(t),i="/"===s(t,-1);return(t=n(a(t.split("/"),function(t){return!!t}),!r).join("/"))||r||(t="."),t&&i&&(t+="/"),(r?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(a(t,function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),a=r(n.split("/")),s=Math.min(i.length,a.length),o=s,c=0;c<s;c++)if(i[c]!==a[c]){o=c;break}var u=[];for(c=o;c<i.length;c++)u.push("..");return(u=u.concat(a.slice(o))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=i(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return i(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n(178))},397:function(t,e,n){"use strict";n.r(e);var r=n(100),i=n.n(r);function a(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=n(101),o=n(8),c=n(9),u=n(12),l=n(10),f=n(11),h=n(0),m=n.n(h),d=n(188),p=n(389),x=n(102),g=n.n(x),v=(n(376),n(378),function(t){var e=t.prevMusic;return m.a.createElement(d.a,{name:"fast backward",className:"iconBtn",style:{left:"50px"},onClick:e})}),y=function(t){var e=t.nextMusic;return m.a.createElement(d.a,{name:"fast forward",className:"iconBtn",style:{right:"50px"},onClick:e})},b=function(){return m.a.createElement(d.a,{disabled:!0,name:"play",style:{position:"absolute",transform:"translateY(10px)",fontSize:"36px",color:"#007d78"}})},w=function(t){var e=t.list,n=t.hotClick;return m.a.createElement("div",{className:"hotList"},e.map(function(t,e){return m.a.createElement("span",{key:e,onClick:n},t)}))},S=function(t){var e=t.text,n=t.change,r=t.search;return m.a.createElement(p.a,{value:e,onChange:n,icon:m.a.createElement(d.a,{name:"search",inverted:!0,circular:!0,link:!0,onClick:r}),placeholder:"Search...",style:{width:"300px"}})},E=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).audioFn=function(t){var e=n.audioEle;if(32===t.keyCode&&n.state.musicUrl)if(e.paused){e.play();var r=sessionStorage.getItem("musicIndex");n.setState({currentIndex:Number(r)})}else e.pause(),n.setState({currentIndex:-1});else 13===t.keyCode&&n.handleSearch()},n.handleChange=function(t){n.setState({text:t.target.value})},n.handleSearch=function(){var t=n.state.text,e=n.audioEle;n.state.musicUrl&&(e.pause(),n.setState({currentIndex:-1})),""===t.trim()?alert("\u8bf7\u8f93\u5165\u641c\u7d22\u7684\u97f3\u4e50\u540d\u79f0"):n.getMusicList(t).then(function(){n.setState({text:""})})},n.playhotMusic=function(t){var e=t.target.innerText;n.getMusicList(e)},n.getMusicList=Object(s.a)(i.a.mark(function t(){var e,r,s,o=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"\u559c\u6b22",t.next=3,g()({url:"https://api.apiopen.top/searchMusic",method:"GET",params:{name:e}});case 3:200===(r=t.sent).status?0!==r.data.result.length&&(s=a(new Set(a(n.state.hotSearch).concat([e]))).slice(-5),n.setState({dataSorce:r.data.result,hotSearch:s},function(){localStorage.setItem("hotMusic",JSON.stringify(s))})):console.log(r.data.message);case 5:case"end":return t.stop()}},t,this)})),n.prevClick=function(){if(!(n.state.currentIndex>0))return!1;n.setState(function(t){return{currentIndex:t.currentIndex-1}},function(){var t=n.state.currentIndex,e=n.state.dataSorce[t].songid;n.getCurrentMusic(e)})},n.nextClick=function(){if(!(n.state.currentIndex<n.state.dataSorce.length-1))return!1;n.setState(function(t){return{currentIndex:t.currentIndex+1}},function(){var t=n.state.currentIndex,e=n.state.dataSorce[t].songid;n.getCurrentMusic(e)})},n.state={currentIndex:-1,dataSorce:[],musicUrl:"",text:"",hotSearch:[]},n}return Object(f.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.getMusicList();var t=localStorage.getItem("hotMusic");t&&this.setState({hotSearch:JSON.parse(t)}),window.addEventListener("keydown",this.audioFn,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.audioFn,!1)}},{key:"handleClick",value:function(t,e){var n=this;console.log(t.lrc),sessionStorage.setItem("musicIndex",e),this.setState({currentIndex:e},function(){n.getCurrentMusic(t.songid)})}},{key:"getCurrentMusic",value:function(){var t=Object(s.a)(i.a.mark(function t(e){var n,r=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(this.state.currentIndex),t.next=3,g()({url:"https://api.imjad.cn/cloudmusic/",method:"get",params:{type:"song",id:e,br:128e3}});case 3:200===(n=t.sent).status?(console.log(n.data),n.data.data&&this.setState({musicUrl:n.data.data[0].url},function(){console.log(r.state.musicUrl)})):console.log(n.statusText);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return m.a.createElement("div",{className:"musicList"},m.a.createElement("div",{className:"searchBox"},m.a.createElement(S,{text:this.state.text,change:this.handleChange,search:this.handleSearch}),m.a.createElement(w,{list:this.state.hotSearch,hotClick:this.playhotMusic})),m.a.createElement("ul",null,this.state.dataSorce.map(function(e,n){return m.a.createElement("li",{key:n,onClick:function(){return t.handleClick(e,n)}},m.a.createElement("div",{className:t.state.currentIndex===n?"rotateGo musicBox":"musicBox"},m.a.createElement("img",{src:e.pic,alt:e.title}),t.state.currentIndex===n?"":m.a.createElement(b,null)),m.a.createElement("div",{className:"musicInfo"},m.a.createElement("p",null,"\u4f5c\u66f2\uff1a",e.author),m.a.createElement("p",null,e.title)))})),m.a.createElement("div",{style:{marginTop:"30px"}},this.state.musicUrl&&m.a.createElement("div",{className:"audiobox",style:{position:"relative",width:"500px",margin:"0 auto"}},0!==this.state.currentIndex&&m.a.createElement(v,{prevMusic:this.prevClick}),m.a.createElement("audio",{src:this.state.musicUrl,preload:"auto",autoPlay:!0,controls:!0,loop:!0,ref:function(e){return t.audioEle=e}}),this.state.currentIndex!==this.state.dataSorce.length-1&&m.a.createElement(y,{nextMusic:this.nextClick}))))}}]),e}(h.Component);e.default=E}}]);