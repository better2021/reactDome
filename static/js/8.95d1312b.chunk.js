(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{371:function(t,e,n){var a=n(372);"string"===typeof a&&(a=[[t.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(183)(a,i);a.locals&&(t.exports=a.locals)},372:function(t,e,n){(t.exports=n(182)(!1)).push([t.i,".musicList {\n  width: 1000px;\n  height: 90vh;\n  margin: 20px auto;\n}\n.musicList ul {\n  height: 60vh;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: space-around;\n}\n.musicList ul li {\n  width: 150px;\n  height: 150px;\n  margin: 10px;\n  border-radius: 100%;\n  overflow: hidden;\n  box-shadow: 0 0 3px #666666;\n}\n.musicList ul li .musicBox {\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.musicList ul li .musicBox img {\n  width: 100%;\n}\n.musicList ul li.rotateGo {\n  animation: myfirst 10s infinite;\n  animation-timing-function: linear;\n}\n.musicList .audiobox,\n.musicList .searchBox {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.musicList .audiobox .hotList,\n.musicList .searchBox .hotList {\n  margin: 10px 0;\n}\n.musicList .audiobox .hotList span,\n.musicList .searchBox .hotList span {\n  display: inline-block;\n  margin: 0 5px;\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  padding: 0 5px;\n  background: #007d78;\n  border-radius: 3px;\n  color: #ffffff;\n  font-size: 12px;\n  cursor: pointer;\n}\n@keyframes myfirst {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n",""])},390:function(t,e,n){"use strict";n.r(e);var a=n(174),i=n.n(a);function r(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var s=n(175),o=n(9),c=n(10),u=n(12),l=n(11),h=n(13),d=n(0),m=n.n(d),p=n(31),f=n(382),x=n(176),g=n.n(x),v=(n(371),function(){return m.a.createElement(p.a,{disabled:!0,name:"play",style:{position:"absolute",transform:"translateY(10px)",fontSize:"36px",color:"#007d78"}})}),y=function(t){var e=t.list,n=t.hotClick;return m.a.createElement("div",{className:"hotList"},e.map(function(t,e){return m.a.createElement("span",{key:e,onClick:n},t)}))},S=function(t){var e=t.text,n=t.change,a=t.search;return m.a.createElement(f.a,{value:e,onChange:n,icon:m.a.createElement(p.a,{name:"search",inverted:!0,circular:!0,link:!0,onClick:a}),placeholder:"Search...",style:{width:"300px"}})},w=function(t){function e(t){var n;return Object(o.a)(this,e),(n=Object(u.a)(this,Object(l.a)(e).call(this,t))).audioFn=function(t){var e=n.audioEle;if(32===t.keyCode&&n.state.musicUrl)if(e.paused){e.play();var a=sessionStorage.getItem("musicIndex");n.setState({currentIndex:Number(a)})}else e.pause(),n.setState({currentIndex:-1});else 13===t.keyCode&&n.handleSearch()},n.handleChange=function(t){n.setState({text:t.target.value})},n.handleSearch=function(){var t=n.state.text,e=n.audioEle;n.state.musicUrl&&(e.pause(),n.setState({currentIndex:-1})),""===t.trim()?alert("\u8bf7\u8f93\u5165\u641c\u7d22\u7684\u97f3\u4e50\u540d\u79f0"):n.getMusicList(t).then(function(){n.setState({text:""})})},n.playhotMusic=function(t){var e=t.target.innerText;n.getMusicList(e)},n.getMusicList=Object(s.a)(i.a.mark(function t(){var e,a,s,o=arguments;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"\u559c\u6b22",t.next=3,g()({url:"https://api.apiopen.top/searchMusic",method:"GET",params:{name:e}});case 3:200===(a=t.sent).status?0!==a.data.result.length&&(s=r(new Set(r(n.state.hotSearch).concat([e]))).slice(-5),n.setState({dataSorce:a.data.result,hotSearch:s},function(){localStorage.setItem("hotMusic",JSON.stringify(s))})):console.log(a.data.message);case 5:case"end":return t.stop()}},t,this)})),n.state={currentIndex:-1,dataSorce:[],musicUrl:"",text:"",hotSearch:[]},n}return Object(h.a)(e,t),Object(c.a)(e,[{key:"componentDidMount",value:function(){this.getMusicList();var t=localStorage.getItem("hotMusic");t&&this.setState({hotSearch:JSON.parse(t)}),window.addEventListener("keydown",this.audioFn,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.audioFn,!1)}},{key:"handleClick",value:function(t,e){sessionStorage.setItem("musicIndex",e),this.setState({currentIndex:e}),this.getCurrentMusic(t.songid)}},{key:"getCurrentMusic",value:function(){var t=Object(s.a)(i.a.mark(function t(e){var n,a=this;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g()({url:"https://api.imjad.cn/cloudmusic/",method:"get",params:{type:"song",id:e,br:128e3}});case 2:200===(n=t.sent).status?(console.log(n.data),n.data.data&&this.setState({musicUrl:n.data.data[0].url},function(){console.log(a.state.musicUrl)})):console.log(n.statusText);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return m.a.createElement("div",{className:"musicList"},m.a.createElement("div",{className:"searchBox"},m.a.createElement(S,{text:this.state.text,change:this.handleChange,search:this.handleSearch}),m.a.createElement(y,{list:this.state.hotSearch,hotClick:this.playhotMusic})),m.a.createElement("ul",null,this.state.dataSorce.map(function(e,n){return m.a.createElement("li",{className:t.state.currentIndex===n?"rotateGo":"",key:n,onClick:function(){return t.handleClick(e,n)}},m.a.createElement("div",{className:"musicBox"},m.a.createElement("img",{src:e.pic,alt:e.title}),m.a.createElement(v,null)))})),m.a.createElement("div",null,this.state.musicUrl&&m.a.createElement("div",{className:"audiobox"},m.a.createElement("audio",{src:this.state.musicUrl,preload:"auto",autoPlay:!0,controls:!0,loop:!0,ref:function(e){return t.audioEle=e}}))))}}]),e}(d.Component);e.default=w}}]);
//# sourceMappingURL=8.95d1312b.chunk.js.map