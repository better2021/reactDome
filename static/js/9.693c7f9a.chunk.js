(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{675:function(e,t,n){var a=n(676);"string"===typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(90)(a,r);a.locals&&(e.exports=a.locals)},676:function(e,t,n){(t=e.exports=n(89)(!1)).push([e.i,"._3oGud0UUpBUBdyCE_FH6fv {\n  width: 1000px;\n  height: calc(100vh - 95px);\n  margin: 20px auto;\n  background: #fff9e9;\n}\n._3oGud0UUpBUBdyCE_FH6fv ul {\n  height: 60vh;\n  display: flex;\n  flex-wrap: wrap;\n  align-items: center;\n  justify-content: space-around;\n}\n._3oGud0UUpBUBdyCE_FH6fv ul li {\n  position: relative;\n}\n._3oGud0UUpBUBdyCE_FH6fv ul li ._1yLdbK3ydJUBLx3F1qb_H9 {\n  width: 150px;\n  height: 150px;\n  margin: 10px;\n  border-radius: 100%;\n  overflow: hidden;\n  box-shadow: 0 0 3px #666666;\n  cursor: pointer;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n._3oGud0UUpBUBdyCE_FH6fv ul li ._1yLdbK3ydJUBLx3F1qb_H9 img {\n  width: 100%;\n}\n._3oGud0UUpBUBdyCE_FH6fv ul li ._1yLdbK3ydJUBLx3F1qb_H9 ._2MjsOSF0MQQsvJ8z117w7q {\n  position: absolute;\n  z-index: 99;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n._3oGud0UUpBUBdyCE_FH6fv ul li ._1yLdbK3ydJUBLx3F1qb_H9 ._1MvgQ9brm5qfG7KSK4t-kC {\n  animation: _163bzMfAm0M_qEEfY0Wbmq 10s infinite;\n  animation-timing-function: linear;\n  filter: blur(2px);\n}\n._3oGud0UUpBUBdyCE_FH6fv ul li .exipZKMx0UXskZOz9PN6D {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n._3oGud0UUpBUBdyCE_FH6fv ul li .exipZKMx0UXskZOz9PN6D p {\n  width: 150px;\n  height: 24px;\n  line-height: 24px;\n  display: inline-block;\n  text-align: center;\n  color: #fff9e9;\n  background: rgba(84, 120, 240, 0.65);\n  border-radius: 3px;\n  padding: 2px 3px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  margin-bottom: 2px;\n  font-size: 13px;\n}\n._3oGud0UUpBUBdyCE_FH6fv .bVzQGHCgFhrT6c97T_-eQ,\n._3oGud0UUpBUBdyCE_FH6fv ._1HXYzqviUe6YAALReBBxui {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n._3oGud0UUpBUBdyCE_FH6fv .bVzQGHCgFhrT6c97T_-eQ .a4E6Gc3b5oyrUN28EMpps,\n._3oGud0UUpBUBdyCE_FH6fv ._1HXYzqviUe6YAALReBBxui .a4E6Gc3b5oyrUN28EMpps {\n  margin: 10px 0;\n}\n._3oGud0UUpBUBdyCE_FH6fv .bVzQGHCgFhrT6c97T_-eQ .a4E6Gc3b5oyrUN28EMpps span,\n._3oGud0UUpBUBdyCE_FH6fv ._1HXYzqviUe6YAALReBBxui .a4E6Gc3b5oyrUN28EMpps span {\n  display: inline-block;\n  margin: 0 5px;\n  height: 24px;\n  line-height: 24px;\n  text-align: center;\n  padding: 0 5px;\n  background: #007d78;\n  border-radius: 3px;\n  color: #ffffff;\n  font-size: 12px;\n  cursor: pointer;\n}\n._3oGud0UUpBUBdyCE_FH6fv .bVzQGHCgFhrT6c97T_-eQ ._2shK_c5kH3sqEKdgF6d5Eo,\n._3oGud0UUpBUBdyCE_FH6fv ._1HXYzqviUe6YAALReBBxui ._2shK_c5kH3sqEKdgF6d5Eo {\n  position: absolute;\n  font-size: 16px;\n  transition: all 0.2s;\n}\n._3oGud0UUpBUBdyCE_FH6fv .bVzQGHCgFhrT6c97T_-eQ ._2shK_c5kH3sqEKdgF6d5Eo:hover,\n._3oGud0UUpBUBdyCE_FH6fv ._1HXYzqviUe6YAALReBBxui ._2shK_c5kH3sqEKdgF6d5Eo:hover {\n  font-size: 18px;\n  cursor: pointer;\n}\n._3oGud0UUpBUBdyCE_FH6fv .rGOFbPP8-y_3Xuy4yQQzo {\n  width: 100vw;\n  height: 100vh;\n  background: rgba(255, 255, 255, 0.6);\n  position: absolute;\n  top: 0;\n  left: 0;\n  z-index: 999;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n@keyframes _163bzMfAm0M_qEEfY0Wbmq {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n",""]),t.locals={musicList:"_3oGud0UUpBUBdyCE_FH6fv",musicBox:"_1yLdbK3ydJUBLx3F1qb_H9",musicLoading:"_2MjsOSF0MQQsvJ8z117w7q",rotateGo:"_1MvgQ9brm5qfG7KSK4t-kC",myfirst:"_163bzMfAm0M_qEEfY0Wbmq",musicInfo:"exipZKMx0UXskZOz9PN6D",audiobox:"bVzQGHCgFhrT6c97T_-eQ",searchBox:"_1HXYzqviUe6YAALReBBxui",hotList:"a4E6Gc3b5oyrUN28EMpps",iconBtn:"_2shK_c5kH3sqEKdgF6d5Eo",loadingBox:"rGOFbPP8-y_3Xuy4yQQzo"}},696:function(e,t,n){"use strict";n.r(t);var a=n(116),r=n.n(a);function i(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var o=n(117),s=n(5),c=n(6),l=n(11),u=n(9),d=n(10),p=n(0),f=n.n(p),h=n(29),m=n(688),x=n(118),g=n.n(x),v=n(675),y=n.n(v),U=n(293),_=function(e){var t=e.prevMusic;return f.a.createElement(h.a,{name:"fast backward",className:y.a.iconBtn,style:{left:"50px"},onClick:t})},E=function(e){var t=e.nextMusic;return f.a.createElement(h.a,{name:"fast forward",className:y.a.iconBtn,style:{right:"50px"},onClick:t})},b=function(){return f.a.createElement(h.a,{disabled:!0,name:"play",style:{position:"absolute",transform:"translateY(10px)",fontSize:"36px",color:"#007d78"}})},B=function(e){var t=e.list,n=e.hotClick;return f.a.createElement("div",{className:y.a.hotList},t.map(function(e,t){return f.a.createElement("span",{key:t,onClick:n},e)}))},C=function(e){var t=e.text,n=e.change,a=e.search;return f.a.createElement(m.a,{value:t,onChange:n,icon:f.a.createElement(h.a,{name:"search",inverted:!0,circular:!0,link:!0,onClick:a}),placeholder:"Search...",style:{width:"300px"}})},k=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).audioFn=function(e){var t=n.audioEle;if(32===e.keyCode&&n.state.musicUrl)if(t.paused){t.play();var a=sessionStorage.getItem("musicIndex");n.setState({currentIndex:Number(a)})}else t.pause(),n.setState({currentIndex:-1});else 13===e.keyCode&&n.handleSearch()},n.handleChange=function(e){n.setState({text:e.target.value})},n.handleSearch=function(){var e=n.state.text,t=n.audioEle;n.state.musicUrl&&(t.pause(),n.setState({currentIndex:-1})),""===e.trim()?alert("\u8bf7\u8f93\u5165\u641c\u7d22\u7684\u97f3\u4e50\u540d\u79f0"):n.getMusicList(e).then(function(){n.setState({text:""})})},n.playhotMusic=function(e){var t=e.target.innerText;n.getMusicList(t)},n.getMusicList=Object(o.a)(r.a.mark(function e(){var t,a,o,s=arguments;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"\u559c\u6b22",n.setState({loading:!0}),e.next=4,g()({url:"https://api.apiopen.top/searchMusic",method:"GET",params:{name:t}});case 4:200===(a=e.sent).status?0!==a.data.result.length&&(o=i(new Set([].concat(i(n.state.hotSearch),[t]))).slice(-5),n.setState({dataSorce:a.data.result,hotSearch:o},function(){localStorage.setItem("hotMusic",JSON.stringify(o))})):console.log(a.data.message),setTimeout(function(){n.setState({loading:!1})},1e3);case 7:case"end":return e.stop()}},e,this)})),n.prevClick=function(){if(!(n.state.currentIndex>0))return!1;n.setState(function(e){return{currentIndex:e.currentIndex-1}},function(){var e=n.state.currentIndex,t=n.state.dataSorce[e].songid;n.getCurrentMusic(t)})},n.nextClick=function(){if(!(n.state.currentIndex<n.state.dataSorce.length-1))return!1;n.setState(function(e){return{currentIndex:e.currentIndex+1}},function(){var e=n.state.currentIndex,t=n.state.dataSorce[e].songid;n.getCurrentMusic(t)})},n.renderList=function(){return f.a.createElement("ul",null,n.state.dataSorce.map(function(e,t){return f.a.createElement("li",{key:t,onClick:function(){return n.handleClick(e,t)}},f.a.createElement("div",{className:y.a.musicBox},f.a.createElement("img",{src:e.pic,alt:e.title,className:n.state.currentIndex===t?y.a.rotateGo:""}),n.state.currentIndex===t?f.a.createElement("div",{className:y.a.musicLoading},f.a.createElement(U,{name:"line-scale-pulse-out",color:"orange"})):f.a.createElement(b,null)),f.a.createElement("div",{className:y.a.musicInfo},f.a.createElement("p",null,"\u4f5c\u66f2\uff1a",e.author),f.a.createElement("p",null,e.title)))}))},n.state={currentIndex:-1,dataSorce:[],musicUrl:"",text:"",hotSearch:[],loading:!1},n}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getMusicList();var e=localStorage.getItem("hotMusic");e&&this.setState({hotSearch:JSON.parse(e)}),window.addEventListener("keydown",this.audioFn,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.audioFn,!1)}},{key:"handleClick",value:function(e,t){var n=this;console.log(e.lrc),sessionStorage.setItem("musicIndex",t),this.setState({currentIndex:t},function(){n.getCurrentMusic(e.songid)})}},{key:"getCurrentMusic",value:function(){var e=Object(o.a)(r.a.mark(function e(t){var n,a=this;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(this.state.currentIndex),e.next=3,g()({url:"https://api.imjad.cn/cloudmusic/",method:"get",params:{type:"song",id:t,br:128e3}});case 3:200===(n=e.sent).status?(console.log(n.data),n.data.data&&this.setState({musicUrl:n.data.data[0].url},function(){console.log(a.state.musicUrl)})):console.log(n.statusText);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return f.a.createElement("div",{className:y.a.musicList},this.state.loading&&f.a.createElement("div",{className:y.a.loadingBox},f.a.createElement(U,{name:"line-scale",color:"red"})),f.a.createElement("div",{className:y.a.searchBox},f.a.createElement(C,{text:this.state.text,change:this.handleChange,search:this.handleSearch}),f.a.createElement(B,{list:this.state.hotSearch,hotClick:this.playhotMusic})),this.renderList(),f.a.createElement("div",{style:{marginTop:"30px"}},this.state.musicUrl&&f.a.createElement("div",{className:y.a.audiobox,style:{position:"relative",width:"500px",margin:"0 auto"}},0!==this.state.currentIndex&&f.a.createElement(_,{prevMusic:this.prevClick}),f.a.createElement("audio",{src:this.state.musicUrl,preload:"auto",autoPlay:!0,controls:!0,loop:!0,ref:function(t){return e.audioEle=t}}),this.state.currentIndex!==this.state.dataSorce.length-1&&f.a.createElement(E,{nextMusic:this.nextClick}))))}}]),t}(p.Component);t.default=k}}]);